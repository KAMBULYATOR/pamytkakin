tg = window.Telegram.WebApp;
    tg.expand();

    window.onload = () => {
        setTimeout(() => {
            document.getElementById('splash-screen').style.opacity = '0';
            document.getElementById('main-app').style.opacity = '1';
            setTimeout(() => document.getElementById('splash-screen').style.display = 'none', 600);
        }, 2500);
    };

    function nav(tab) {
        tg.HapticFeedback.impactOccurred('light');
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('p-' + tab).classList.add('active');
        document.getElementById('n-' + tab).classList.add('active');
        document.getElementById('p-submenu').classList.remove('active');
    }

    function toggleSubMenu(show) {
        tg.HapticFeedback.impactOccurred('medium');
        document.getElementById('p-base').classList.toggle('active', !show);
        document.getElementById('p-submenu').classList.toggle('active', show);
    }

    function openDoc(title, text) {
        tg.HapticFeedback.impactOccurred('medium');
        document.getElementById('v-title').innerText = title;
        document.getElementById('v-text').innerHTML = text;
        document.getElementById('viewer').style.display = 'block';
    }

    function closeDoc() { document.getElementById('viewer').style.display = 'none'; }

    function addRow() {
        tg.HapticFeedback.impactOccurred('light');
        const row = document.createElement('div');
        row.className = 'dog-row';
        row.innerHTML = `<span>Вес собаки (кг):</span><input type="number" class="w-val" placeholder="0" oninput="runCalc()">`;
        document.getElementById('dog-inputs').appendChild(row);
    }

    function runCalc() {
        let total = 0;
        document.querySelectorAll('.w-val').forEach(el => {
            let v = parseFloat(el.value);
            if (v > 0) {
                if (v < 25) total += 400;
                else if (v <= 45) total += 600;
                else total += 1000;
            }
        });
        document.getElementById('total-g').innerText = total + ' г';
        document.getElementById('total-kg').innerText = '(' + (total/1000).toFixed(1) + ' кг)';
    }
</script>
</body>
</html> var
